<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Esensorics test prototype</title>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <link rel="stylesheet" href="style.css">
  <script>

  $(function() {   
   
 //vocabulary for autocompelete
      var availableTags = [
      "Sweet",
      "savory",
      "salty",
      "bitter",
      "tart",
      "smoky",
      "rancid",
      "spicy",
      "hot",
      "creamy",
      "crumbly",
      "crunchy",
      "greasy",
      "gooey",
      "moist",
      "mushy",
      "Perl",
      "PHP",
      "Python",
      "Ruby",
      "Scala",
      "Scheme"
    ];
//adding autocomplete to axis names      
    $( ".axis_name" ).autocomplete({
      source: availableTags
    });      

      
      
 // this pice hides the tag window when we click somewhere else 
    $(document).click(function() {
        $(".add_tag_layer").hide();
});
$(".add_tag_layer").click(function(e) {
    e.stopPropagation(); 
    return false;        
                        
});  
    // end

      
	$( "#draggable_item1, #draggable_item2, #draggable_item3, #draggable_item4" ).draggable({containment: "#drag_window", snap: "#canvas", snapMode: "inner", snapTolerance: 32});
      
     
      
///// 
      x1 =1;
      y1=1;
	  $( "#drag_window" ).droppable({
  drop: function(event,ui) {
    
      if(true){
    $(ui.draggable).animate({ top: y1, left:x1},400);
     // var draggableId = ui.draggable.attr("id");
       $(ui.draggable).effect( "bounce", 
          {times:3}, 300 );
      
      }
  }
        
});
//***********************     
      
       $( "#canvas" ).droppable({
                  greedy: true
});
//*********************      
      $("#ax_b, #ax_t, #ax_l, #ax_r").keyup(function(){
   $(this).css({'background-color' : '#BEF781'});
});
//************************    
        $( "#canvas" ).droppable({
  drop: function(event,ui) {
    var top= $( "#ax_t" ).val();
    var bott= $( "#ax_b" ).val();
     var left = $( "#ax_l" ).val();
     var right= $( "#ax_r" ).val();
      
   //to be replaced by a condition about axis   
      if((top == "") || (bott == "") ||(left == "")||(right == "")){
       
            
          if(bott == ""){
          $("#ax_b").css({'background-color' : '#FFBF00'});
          $("#ax_b").effect( "bounce", 
          {times:2}, 300 );
          $("#ax_b").focus();
          }   
          if(left == ""){
          $("#ax_l").css({'background-color' : '#FFBF00'});
          $("#ax_l").effect( "bounce", 
          {times:2}, 300 );
          $("#ax_l").focus();

          }   
          if(right == ""){
          $("#ax_r").css({'background-color' : '#FFBF00'});
          $("#ax_r").effect( "bounce", 
          {times:2}, 300 );
          $("#ax_r").focus();

          } 
          if(top == ""){
          $("#ax_t").css({'background-color' : '#FFBF00'});
          $("#ax_t").effect( "bounce", 
          {times:2}, 300 );
          $("#ax_t").focus();
          }  
          
     //   alert("To be able to drag items into canvas, please name all the axis first" );  
    $(ui.draggable).animate({ top: y1, left:x1},400);
     // var draggableId = ui.draggable.attr("id");
       $(ui.draggable).effect( "bounce", 
          {times:3}, 300 );
      
      }
  }
        
});

  });
      
 //******************
    
      function submit_function( ){
<<<<<<< HEAD
=======
        var alert_text="submitted sucsessfully!";
>>>>>>> Marie's
          var top= $( "#ax_t" ).val();
          var bott= $( "#ax_b" ).val();
          var left = $( "#ax_l" ).val();
          var right= $( "#ax_r" ).val();
<<<<<<< HEAD
        var alert_text="Submitted sucsessfully! Positions of elements to be saved in database: \n" + 
          "Sample 1: x = " + getPosition(document.getElementById("draggable_item1")).x + ", y = " + getPosition(document.getElementById("draggable_item1")).y + "\n" + 
          "Sample 2: x = " + getPosition(document.getElementById("draggable_item2")).x + ", y = " + getPosition(document.getElementById("draggable_item2")).y + "\n" + 
          "Sample 3: x = " + getPosition(document.getElementById("draggable_item3")).x + ", y = " + getPosition(document.getElementById("draggable_item3")).y + "\n" + 
          "Sample 4: x = " + getPosition(document.getElementById("draggable_item4")).x + ", y = " + getPosition(document.getElementById("draggable_item4")).y;


=======
>>>>>>> Marie's
      var  x1 = 1;
          var  y1= 1; 
   //to be replaced by a condition about axis   
      if((top == "") || (bott == "") ||(left == "")||(right == "")){
      alert_text="You need to name the axis and place the items in the canvas, before you be able to submit!";
      }else{
//get canvas position
   var position = getPosition(document.getElementById("canvas"));
 cx=position.x;
  cy=position.y;       
          
          //get items position
 position = getPosition(document.getElementById("draggable_item1"));
 x1=position.x;
 y1=position.y;
          
  position = getPosition(document.getElementById("draggable_item2"));
 x2=position.x;
 y2=position.y;
  
  position = getPosition(document.getElementById("draggable_item3"));
 x3=position.x;
 y3=position.y;
          
          
 position = getPosition(document.getElementById("draggable_item4"));
 x4=position.x;
 y4=position.y;
 if((x1 < cx) || (x2 < cx) ||(x3 < cx) ||(x4 < cx)){
 alert_text = "You need to locate all the items in the canvas before you beable to submit!";
 }         
          
      }

      
      
          
       alert(alert_text);
}
          
//************************   
//check if all samples are in canvas and return the ones who are not
 function check_items_onCanvas(element) {
     var position = getPosition(document.getElementById("canvas"));
 cx=position.x;
  cy=position.y;       
          
          //get items position
 position = getPosition(document.getElementById("draggable_item1"));
 x1=position.x;
 y1=position.y;
          
  position = getPosition(document.getElementById("draggable_item2"));
 x2=position.x;
 y2=position.y;
  
  position = getPosition(document.getElementById("draggable_item3"));
 x3=position.x;
 y3=position.y;
          
          
 position = getPosition(document.getElementById("draggable_item4"));
 x4=position.x;
 y4=position.y;
 }
      
      
//get position      
 function getPosition(element) {
    var xPosition = 0;
    var yPosition = 0;
  
    while(element) {
        xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);
        yPosition += (element.offsetTop - element.scrollTop + element.clientTop);
        element = element.offsetParent;
    }
    return { x: xPosition, y: yPosition };
}   
//************************         
          
          
  </script>
</head>
<body>

 <div id="drag_window">

  <div id="leftinfo">
    <div id="h1">
<h1>Candy Test</h1>
</div>
  <div id="p">
<p>This could be the place for help text. The tasting is done simultaneously with placing the samples.</p>
</div>
<div id="items">
	<div id="draggable_item1" class="draggable_content">
	  <p>Sample 1</p>
	  <p id="add_tag_link1"><a href="javascript:$('#add_tag_layer1').toggle();$('#add_tag_newtag1').focus();">Tag</a></p>
	  <div id="add_tag_layer1" class="add_tag_layer">
	  	<input id="add_tag_newtag1" type="text" value="" />
	  	<input type="button" name="tag" class="add_tag_layer_button" value="Add" onclick="javascript:$('#add_tag_link1').html('(' + $('#add_tag_newtag1').val() + ') <a href=&quot;javascript:$(\'#add_tag_layer1\').toggle();&quot;><img src=&quot;img/icon_edit.png&quot; width=&quot;10&quot; /></a>'); $('#add_tag_layer1').toggle();" />
	  </div>
	</div>

	<div id="draggable_item2" class="draggable_content">
	  <p>Sample 2</p>
	  <p id="add_tag_link2"><a href="javascript:$('#add_tag_layer2').toggle();$('#add_tag_newtag2').focus();">Tag</a></p>
	  <div id="add_tag_layer2" class="add_tag_layer">
	  	<input id="add_tag_newtag2" type="text" value="" />
	  	<input type="button" name="tag" class="add_tag_layer_button" value="Add" onclick="javascript:$('#add_tag_link2').html('(' + $('#add_tag_newtag2').val() + ') <a href=&quot;javascript:$(\'#add_tag_layer2\').toggle();&quot;><img src=&quot;img/icon_edit.png&quot; width=&quot;10&quot; /></a>'); $('#add_tag_layer2').toggle();" />
	  </div>
	</div>

	<div id="draggable_item3" class="draggable_content">
	  <p>Sample 3</p>
	  <p id="add_tag_link3"><a href="javascript:$('#add_tag_layer3').toggle();$('#add_tag_newtag3').focus();">Tag</a></p>
	  <div id="add_tag_layer3" class="add_tag_layer">
	  	<input id="add_tag_newtag3" type="text" value="" />
	  	<input type="button" name="tag" class="add_tag_layer_button" value="Add" onclick="javascript:$('#add_tag_link3').html('(' + $('#add_tag_newtag3').val() + ') <a href=&quot;javascript:$(\'#add_tag_layer3\').toggle();&quot;><img src=&quot;img/icon_edit.png&quot; width=&quot;10&quot; /></a>'); $('#add_tag_layer3').toggle();" />
	  </div>
	</div>

	<div id="draggable_item4" class="draggable_content">
	  <p>Sample 4</p>
	  <p id="add_tag_link4"><a href="javascript:$('#add_tag_layer4').toggle();$('#add_tag_newtag4').focus();">Tag</a></p>
	  <div id="add_tag_layer4" class="add_tag_layer">
	  	<input id="add_tag_newtag4" type="text" value="" />
	  	<input type="button" name="tag" class="add_tag_layer_button" value="Add" onclick="javascript:$('#add_tag_link4').html('(' + $('#add_tag_newtag4').val() + ') <a href=&quot;javascript:$(\'#add_tag_layer4\').toggle();&quot;><img src=&quot;img/icon_edit.png&quot; width=&quot;10&quot; /></a>'); $('#add_tag_layer4').toggle();" />
	  </div> 
    	</div> 
</div> 
      

     <button  type="button" id="submitbutton" onclick="submit_function()">Submit</button> 
    
  </div> 
  
      


  <div id="rightinfo">
    <div id="canvas">
    	<script type="text/javascript">
      //$('#canvas').html('canvas: '+samplesList[2]['name']);
	</script>
	<div id="axis_horisontal"></div>
	<div id="axis_vertical"></div>
  
	<div id="axisname_top">
<input class="axis_name" id="ax_t" type="text" placeholder="Name this axis" size="13" maxlength="13"><br>
</div>  

  <div id="axisname_bottom">
<input class="axis_name" id="ax_b" type="text" placeholder="Name this axis" size="13" maxlength="13"><br>
</div>

	<div id="axisname_left">

<input class="axis_name" id="ax_l" type="text" placeholder="Name this axis" size="13" maxlength="13"><br>
</div>

	<div id="axisname_right" >
    <input class="axis_name" id="ax_r" type="text" placeholder="Name this axis" size="13" maxlength="13"><br>
  </div>
</div>
</div>
</div>

 
</body>
</html>

